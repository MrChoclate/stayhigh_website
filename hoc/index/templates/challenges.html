{% extends "base.html" %}
{% load staticfiles %}
{% load materializecss %}

{% block content %}
  <div id="index-banner" class="parallax-container challenges">
    <div class="section no-pad-bot">
      <div class="container">
        <br><br>
        <h1 class="header center white-text">Les challenges</h1>
        <div class="row center">
          <h5 class="header col s12 light">Proposer un challenge</h5>
        </div>
        <div class="row center">
          <a class="btn-floating btn-large waves-effect waves-light red tooltipped" href="{% url 'challenge' %}" data-position="bottom" data-delay="50" data-tooltip="Nouveau challenge"><i class="mdi-content-add"></i></a>
        </div>
        <br><br>

      </div>
    </div>
    <div class="parallax"><img src="{% static 'img/1.jpg' %}" alt="Unsplashed background img 2"></div>
  </div>


  <div class="container">
    <div class="section">

          <div class="row">
            <div class="col s12">
              <ul class="tabs z-depth-1 defis-tabs">
                <li class="tab col s3"><a class="active" href="#valide">Validé{{challenges_v|pluralize}} <span>{{challenges_v|length}}</span> </a></li>
                <li class="tab col s3"><a href="#rejete">Rejeté{{challenges_r|pluralize}} <span>{{challenges_r|length}}</a></li>
                <li class="tab col s3"><a href="#encours">En cours <span>{{challenges_p|length}}</a></li>
                <li class="tab col s3"><a href="#nonlu">Non lu{{challenges_n|pluralize}}<span>{{challenges_n|length}}</a></li>
              </ul>
            </div>


            <div id="valide" class="col s12">
                  <ul class="collection with-header">
                    <li class="collection-header"><h4 class="center-align">Défi{{challenges_v|pluralize}} Validé{{challenges_v|pluralize}}</h4></li>

                    {% for challenge in challenges_v %}
                    <li class="collection-item">{{challenge.content}} par {{challenge.first_name}} {{challenge.last_name}}</li>
                    {% empty %}
                  <li class="collection-item">Aucun défi</li>
                    {% endfor %}
                  </ul>
            </div>




            <div id="rejete" class="col s12">
                  <ul class="collection with-header">
                  <li class="collection-header"><h4 class="center-align">Défi{{challenges_r|pluralize}} Rejeté{{challenges_r|pluralize}}</h4></li>

                  {% for challenge in challenges_r %}
                  <li class="collection-item">{{challenge.content}} par {{challenge.first_name}} {{challenge.last_name}}</li>
                  {% empty %}
                  <li class="collection-item">Aucun défi</li>
                  {% endfor %}
                  </ul>
            </div>

            <div id="encours" class="col s12">
              <ul class="collection with-header">
                  <li class="collection-header"><h4 class="center-align">En cours</h4></li>

                  {% for challenge in challenges_p %}
                  <li class="collection-item">{{challenge.content}} par {{challenge.first_name}} {{challenge.last_name}}</li>
                  {% empty %}
                  <li class="collection-item">Aucun défi</li>
                  {% endfor %}
              </ul>

            </div>

            <div id="nonlu" class="col s12">
              <ul class="collection with-header">
                  <li class="collection-header"><h4 class="center-align">Non lu{{challenges_n|pluralize}}</h4></li>

                  {% for challenge in challenges_n %}
                  <li class="collection-item">{{challenge.content}} par {{challenge.first_name}} {{challenge.last_name}}</li>
                  {% empty %}
                  <li class="collection-item">Aucun défi</li>
                  {% endfor %}
              </ul>
            </div>
          </div>

    </div>
  </div>


{% endblock content %}


{% block script %}
<script type="text/javascript">
$('nav #defis_nav').addClass('active');

 $(document).ready(function(){
    $('ul.tabs').tabs();
  });
 </script>
{% endblock script %}
